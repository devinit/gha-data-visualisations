(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,n){e.exports=n(626)},624:function(e,t,n){},626:function(e,t,n){"use strict";n.r(t);n(254),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(285),n(125),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(295),n(296),n(297),n(299),n(300),n(301),n(303),n(304),n(305),n(165),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(360),n(361),n(371),n(372),n(373),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(223),n(388),n(389),n(390),n(392),n(393),n(394),n(395),n(224),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(408),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(176),n(464),n(466),n(474),n(475),n(476),n(477),n(478),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(516),n(518),n(520),n(521),n(522),n(523),n(524),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(537),n(538),n(539),n(540),n(541),n(543),n(545),n(547),n(549),n(550),n(551),n(552),n(553),n(554),n(556),n(558),n(559),n(560),n(562),n(564),n(565),n(566),n(567),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(577),n(578),n(583),n(584),n(587),n(588);var a,r=n(2),i=n(33),o=n.n(i),l=n(51),s=n(144),c=n(1),u=n.n(c),d=n(8),m=n.n(d),f=n(247),p=n(252).a.div(a||(a=Object(f.a)(["\n  color: red;\n  font-size: 11px;\n  position: relative;\n  padding: 5px 5px 5px 0px;\n  display: block;\n"]))),b=function(e){var t=Object(c.useState)(""),n=t[0],a=t[1],r=function(t){t?"maxSelectedOptions"===t.type&&a(e.selectErrorMessage):a("")};return u.a.createElement("div",null,u.a.Children.map(e.children,(function(e){return u.a.isValidElement(e)?u.a.cloneElement(e,{onError:r}):e})),n?u.a.createElement(p,{className:"data-selector--wrapper"},n):null)};b.propTypes={selectErrorMessage:m.a.string,children:m.a.node};var h=b,g=n(248),y=n(251),x={control:function(e){return Object.assign({},e,{borderColor:"#ddd",borderRadius:"none",boxShadow:"none",":hover":{borderColor:"#8f1b13"},":active":{borderColor:"#8f1b13"}})},option:function(e){return Object.assign({},e,{fontSize:"14px"})},singleValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValueLabel:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{paddingRight:6})},multiValueRemove:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{display:"none"})},input:function(e){return Object.assign({},e,{fontSize:"14px"})},indicatorsContainer:function(e){return Object.assign({},e,{pointerEvents:"none"})}},v=function(e){var t=e.label,n=e.onError,a=e.maxSelectedOptions,i=e.defaultValue,o=e.singleSelectOptions,l=Object(s.a)(e,["label","onError","maxSelectedOptions","defaultValue","singleSelectOptions"]),u=Object(c.useState)(i),d=u[0],m=u[1];Object(c.useEffect)((function(){l.onChange&&l.onChange(d),n&&n()}),[d]);return Object(r.b)("div",{className:"labelled-data-selector--wrapper"},Object(r.b)("label",null,Object(r.b)("b",null,t)),Object(r.b)(y.a,Object(g.a)({},l,{value:d,onChange:function(e){if(l.isMulti)if(e.length){var t=e.findIndex((function(e){return o.find((function(t){return t.value===e.value}))}));l.isMulti&&e.length>1&&-1!==t?m(0===t?e.slice(1):[e[t]]):a&&e.length>a?n&&n({type:"maxSelectedOptions",message:"Only up to "+a+" selections allowed"}):m(e)}else m(i);else m(e)},css:{marginRight:"10px"},styles:x,isClearable:"undefined"!==l.isClearable?l.isClearable:d.length>1})))};v.propTypes={label:m.a.string,options:m.a.array,maxSelectedOptions:m.a.number,onChange:m.a.func,onError:m.a.func,defaultValue:m.a.array,singleSelectOptions:m.a.array,isMulti:m.a.bool,isClearable:m.a.bool},v.defaultProps={maxSelectedOptions:2,singleSelectOptions:[]};var w=v,S=function(e){var t=e.defaultDonor,n=e.onSelectDonor,a=Object(s.a)(e,["defaultDonor","onSelectDonor"]),r=Object(c.useState)(a.donors),i=r[0],o=r[1],l=Object(c.useState)(a.defaultDataType),d=l[0],m=l[1];Object(c.useEffect)((function(){o(a.donors)}),[a.donors]);return u.a.createElement(h,{selectErrorMessage:a.donorSelectErrorMessage},u.a.createElement(w,{label:"Select up to two donors",options:i.map((function(e){return{value:e,label:e,isCloseable:!0}})),defaultValue:[{value:t,label:t,isCloseable:!0}],isMulti:!0,onChange:n,css:{minWidth:"200px"},classNamePrefix:"donors-select",isClearable:!1}),u.a.createElement(w,{label:"Display data as",options:["Volumes","Proportions","%GNI"].map((function(e){return{value:e,label:e}})),defaultValue:[{value:d,label:d}],value:d,onChange:function(e){m(e?e.value:a.defaultDataType),a.onSelectDataType&&a.onSelectDataType(e?e.value:a.defaultDataType)},css:{minWidth:"150px"},classNamePrefix:"donors-display-data-as"}))};S.propTypes={donors:m.a.array,donorSelectErrorMessage:m.a.string,onSelectDonor:m.a.func,onSelectDataType:m.a.func,defaultDonor:m.a.string,defaultDataType:m.a.string};var A=S,C=n(249),_=function(e,t){return e.sort((function(e,n){return Number(n[t])-Number(e[t])}))},O=function(e){return new Promise((function(t){Object(C.parse)(e,{download:!0,header:!0,skipEmptyLines:!0,complete:function(e){var n=e.data;return t(n)}})}))},N=function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,["spotlight-banner","data-selector--wrapper"]),e.parentElement.insertBefore(n,e),n},D={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0c457b","#0071b1","#0089cc","#5da3d9","#77adde","#88bae5","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"],orange:["#973915","#d85b31","#eb642b","#f18e5e","#f4a57c","#f6bb9d"]},L=function(e,t){var n=t.selected,a=Object.values(n).filter((function(e){return e})).length;e.setOption({animation:!0}),0===a?Object.keys(n).forEach((function(t){e.dispatchAction({type:"legendSelect",name:t})})):n[t.name]||(e.dispatchAction({type:"legendSelect",name:t.name}),Object.keys(n).forEach((function(a){Object.prototype.hasOwnProperty.call(n,a)&&a!==t.name&&e.dispatchAction({type:"legendUnSelect",name:a})})))},E={color:D.default.concat(D.rainbow),legend:{left:"10%",top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{show:!0,trigger:"item",showContent:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},toolbox:{show:!0,showTitle:!1,feature:{saveAsImage:{title:"Save as PNG",pixelRatio:2}},right:20,tooltip:{show:!0,formatter:function(e){return"<div>"+e.title+"</div>"},textStyle:{fontFamily:"Geomanist Regular,sans-serif"}}},xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1},nameLocation:"end",nameTextStyle:{padding:[0,50,0,0]}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0}},T=function(e,t){window.addEventListener("resize",(function(){e.resize({width:t.clientWidth+"px",height:t.clientHeight+"px"})}),!0)},k=function(e){var t=e.some((function(e){return e.stack})),n=Array.from(new Set(e.map((function(e){return e.name})))).length,a=Math.max.apply(Math,e.reduce((function(e,t){var n=t.data;return e.concat(n.map((function(e){return e.value||0})))}),[]));return 0===a?"blank":(t?a*n<100:a<100)?"near":(t?a*n<1e3:a<1e3)?"middle":"far"},j=function(e,t,n,a,r){return(e-a)*((n-t)/(r-a))+t},V=function(e,t){var n=e.map((function(e){return Number(e[t])}));return{min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}},M=E,R=["#f49b21","#fccc8e","#f9b865"],F="Volumes",U={Proportions:"Proportions",Volumes:"Volumes","%GNI":"%GNI"},I=function(e){return void 0===e&&(e=""),e.trim()?Number(e.replace(",","").replace(" ","").replace("%","").trim()):null},P=function(e){return e.map((function(e){var t=Object.assign({},e);return t.value=I(t.Value),t}))},z=function(){return"%GNI"===F?"line":"bar"},W=function(e,t,n,a,r){void 0===r&&(r="Proportions");var i=e.filter((function(e){return e.Donor.trim()===n&&e.Series===a&&e.Display===r}));return t.map((function(e){return i.find((function(t){return t.Year===e}))}))},G=function(e,t,n){return void 0===t&&(t="currency"),void 0===n&&(n="auto"),new Intl.NumberFormat("en-US",{style:t,currency:"USD",signDisplay:n,maximumFractionDigits:0}).format(e)},B=function(e){void 0===e&&(e="far");return"Volumes"!==F?{type:"value",axisLabel:{formatter:"{value}%"},name:"",max:"Proportions"===F?100:null}:{type:"value",axisLabel:{formatter:"{value}"},nameRotate:90,name:"US$ millions",nameLocation:"end",nameTextStyle:{verticalAlign:"top",align:"right",padding:{near:[-35,0,0,0],middle:[-45,0,0,0],far:[-60,0,0,0]}[e]},max:null}},$=function(e,t,n){var a=n.years,r=n.channels,i={color:R,legend:{show:!0,top:"top",padding:[20,10,5,10],textStyle:{fontSize:"1.3rem"}},grid:{bottom:"10%",top:"20%"},xAxis:{type:"category",data:a},yAxis:B(),series:r.map((function(e){return{name:e,data:W(t,a,"All donors",e,U[F]).map((function(e){return{value:e?e.value:null,emphasis:{focus:"self"}}})),type:z(),stack:"channels",tooltip:{trigger:"item",formatter:function(n){var a=t.find((function(t){return t.Series===e&&"All donors"===t.Donor&&""+t.Year===n.name&&t.Display===U[F]})),r=e.includes("Multilateral HA")?e.replace("Multilateral HA","Multilateral Humanitarian Assistance"):e;return"All donors, "+n.name+" <br />"+r+": <strong>"+("Proportions"===F?n.value.toFixed(2)+"%":"US$"+G(I(a.Value),"decimal","never")+" million")+" </strong>"}},cursor:"auto"}}))};return i.yAxis=B(k(i.series)),M.toolbox.feature.saveAsImage.name="donors",e.setOption(o()(i,M),{replaceMerge:["series"]}),e.on("legendselectchanged",(function(t){L(e,t)})),e},H=function(e,t,n){var a=n.donors,r=n.channels,i=n.years,o=P(t),l=z(),s=a.map((function(e){return r.map((function(t,n){return{name:"%GNI"!==F?t:e,data:W(o,i,e,t,U[F]).map((function(e){return{value:e&&"number"==typeof e.value?e.value:null,emphasis:{focus:"self"}}})),type:l,stack:"%GNI"!==F?e:void 0,symbol:"circle",symbolSize:10,connectNulls:"line"!==l&&void 0,tooltip:{trigger:"item",formatter:function(n){var a=o.find((function(a){return a.Series===t&&a.Donor===e&&""+a.Year===n.name&&a.Display===U[F]})),r="Volumes"===F?"US$"+G(I(a.Value),"decimal","never")+" million":n.value.toFixed(2)+"%";return e+", "+n.name+" <br />"+("%GNI"===F?"Total HA":t)+": <strong>"+r+"</strong>"}},label:{show:"bar"===l&&(0===n&&a.length>1),position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:function(){return""+e},fontSize:16},cursor:"auto"}}))})).reduce((function(e,t){return e.concat(t)}),[]);e.setOption({yAxis:B(k(s)),series:s},{replaceMerge:["series"]})},Y=function(){window.DICharts.handler.addChart({className:"dicharts--gha-donors",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/donor_interactive_data_long.csv").then((function(n){var a=N(e),i=Array.from(new Set(n.map((function(e){return e.Donor})))).sort(),o=Array.from(new Set(n.map((function(e){return e.Year})))).sort(),s=Array.from(new Set(n.map((function(e){return e.Series})))),c=window.echarts.init(e);$(c,P(n),{years:o,channels:s});var u=[];Object(l.createRoot)(a).render(Object(r.b)(A,{selectErrorMessage:"You can compare two donors. Please remove one before adding another.",donors:i,onSelectDataType:function(e){if(F=e||F,u.length){var t=n.filter((function(e){return u.includes(e.Donor)}));H(c,t,{donors:u,channels:s,years:o})}else $(c,P(n),{years:o,channels:s})},onSelectDonor:function(e){if(e.length){var t=n.filter((function(t){return e.find((function(e){return e.value===t.Donor}))}));u=e.map((function(e){return e.value})),H(c,t,{donors:u,channels:s,years:o})}else $(c,P(n),{years:o,channels:s})},defaultDonor:"All donors",defaultDataType:"Volumes",donorSelectErrorMessage:"You can compare two donors. Please remove one before adding another."})),t.hideLoading(),T(c,e)}))}))}}})},q=["#f49b21","#feedd4","#fccc8e","#f9b865","#e48a00","#a85d00","#7d4712"],J=function(e){return void 0===e&&(e=""),e.trim()?Number(e.replace(",","").replace(" ","").replace("%","").trim()):null},Z=function(e){return e.map((function(e){var t=Object.assign({},e);return t.value=J(e.Value),t}))},K=function(e,t,n,a){var r=e.filter((function(e){return e.Donor.trim()===n&&e.Series===a}));return t.map((function(e){return r.find((function(t){return t.Year===e}))}))},Q=function(e,t,n){var a=n.years,r=n.channels,i={color:q,legend:{show:!0,top:"top",padding:[20,10,5,10],textStyle:{fontSize:"1.3rem"}},grid:{bottom:"10%",top:"20%"},xAxis:{type:"category",data:a},yAxis:{type:"value",axisLabel:{formatter:"{value}%"},max:100},series:r.map((function(e){return{name:e,data:K(t,a,"All donors",e).map((function(e){return{value:e&&Number(e.value),emphasis:{focus:"self"}}})),type:"bar",stack:"channels",tooltip:{trigger:"item",formatter:function(n){var a,r,i,o=t.find((function(t){return t.Series===e&&"All donors"===t.Donor&&""+t.Year===n.name}));return"All donors, "+n.name+" <br />"+e+": <strong>"+Number(n.value,10).toFixed(2)+"%</strong> (US$"+(a=J(o["US$ millions, constant 2020 prices"]),void 0===(r="decimal")&&(r="currency"),void 0===(i="never")&&(i="auto"),new Intl.NumberFormat("en-US",{style:r,currency:"USD",signDisplay:i,maximumFractionDigits:0}).format(a)+" million)")}},cursor:"auto"}}))};return M.toolbox.feature.saveAsImage.name="funding-channels",e.setOption(o()(i,M),{replaceMerge:["series"]}),e.on("legendselectchanged",(function(t){L(e,t)})),e},X=function(){window.DICharts.handler.addChart({className:"dicharts--boilerplate-chart",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/funding-channels-interactive-data.csv").then((function(n){var a,r,i,o=N(e),s=Array.from(new Set(n.map((function(e){return e.Donor})))),c=Array.from(new Set(n.map((function(e){return e.Year})))),d=(a=Array.from(new Set(n.map((function(e){return e.Series})))),r=["Not reported","Other"],i=a.filter((function(e){return!r.includes(e)})),r.forEach((function(e){a.includes(e)&&i.push(e)})),i),m=window.echarts.init(e);Q(m,Z(n),{years:c,channels:d});var f=[];Object(l.createRoot)(o).render(u.a.createElement(h,{selectErrorMessage:"You can compare two donors. Please remove one before adding another."},u.a.createElement(w,{label:"Select up to two donors",options:s.map((function(e){return{value:e,label:e,isCloseable:!0}})),defaultValue:[{value:"All donors",label:"All donors",isCloseable:!0}],isMulti:!0,onChange:function(e){if(e.length){var t=n.filter((function(t){return e.find((function(e){return e.value===t.Donor}))}));f=e.map((function(e){return e.value})),function(e,t,n){var a=n.donors,r=n.channels,i=n.years,o=Z(t),l=a.map((function(e){return r.map((function(t,n){return{name:t,data:K(o,i,e,t).map((function(e){return{value:e&&Number(e.value).toFixed(2),emphasis:{focus:"self"}}})),type:"bar",stack:e,tooltip:{trigger:"item",formatter:function(n){var a="<strong>"+o.find((function(a){return a.Series===t&&a.Donor===e&&""+a.Year===n.name})).value+"%</strong>";return e+", "+n.name+" <br />"+t+": "+a}},label:{show:0===n&&a.length>1,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:function(){return""+e},fontSize:16},cursor:"auto"}}))})).reduce((function(e,t){return e.concat(t)}),[]);e.setOption({series:l},{replaceMerge:["series"]})}(m,t,{donors:f,channels:d,years:c})}else Q(m,Z(n),{years:c,channels:d})},css:{minWidth:"200px"},classNamePrefix:"channels-chart-select",isClearable:!1}))),t.hideLoading(),T(m,e)}))}))}}})},ee=n(26),te=n.n(ee),ne=n(50),ae=function(e){var t=Object(c.useState)(e.donorRecipients),n=t[0],a=t[1],i=Object(c.useState)(e.defaultBreakdown),o=i[0],l=i[1],s=Object(c.useState)(e.defaultRecipient),u=s[0],d=s[1];Object(c.useEffect)((function(){a("By donor"===o?e.donorRecipients:e.orgTypeRecipients),e.onSelectBreakdown&&e.onSelectBreakdown(o,u)}),[o]),Object(c.useEffect)((function(){e.onSelectRecipient&&e.onSelectRecipient(u,o)}),[u]);return Object(r.b)(h,null,Object(r.b)(w,{classNamePrefix:"recipient-chart-select",label:"Select recipient",options:n.sort().map((function(e){return{value:e,label:e}})),defaultValue:[{value:e.defaultRecipient,label:e.defaultRecipient}],onChange:function(t){d(t.value||e.defaultRecipient)},css:{minWidth:"150px"}}),Object(r.b)(w,{classNamePrefix:"recipient-chart-breakdown",label:"Choose breakdown",options:["By donor","By type of organisation receiving funding"].map((function(e){return{value:e,label:e}})),defaultValue:[{value:e.defaultBreakdown,label:e.defaultBreakdown}],onChange:function(t){l(t.value||e.defaultBreakdown)},css:{minWidth:"300px"}}))};ae.propTypes={donorRecipients:m.a.array,orgTypeRecipients:m.a.array,defaultRecipient:m.a.string,defaultBreakdown:m.a.string,onSelectBreakdown:m.a.func,onSelectRecipient:m.a.func},ae.defaultProps={defaultBreakdown:"By donor",defaultRecipient:"Afghanistan"};var re=ae,ie=["#f49b21","#fccc8e","#f9b865","#e48a00","#a85d00","#7d4712"],oe=["#f49b21","#feedd4","#fccc8e","#f9b865","#e48a00","#a85d00","#7d4712"],le=new Intl.NumberFormat,se=function(e){return e.trim()?Number(e.replace(",","").replace(" ","").replace("%","").trim()).toFixed(2):null},ce=function(e,t){return void 0===t&&(t="Value"),e.map((function(e){var n=Object.assign({},e);return n.value=se(e[t]),n}))},ue=function(e,t,n,a){var r=e.filter((function(e){return e.Recipient.trim()===n&&e.Series===a}));return t.map((function(e){return r.find((function(t){return t.Year===e}))||null}))},de=function(e,t,n){var a=e.filter((function(e){return e.Series===t}));return n.map((function(e){var t=a.find((function(t){return t.Year===e}));return{value:t&&se(t.Value)||null,emphasis:{focus:"self"}}}))},me=function(e,t){var n=["US","Germany","EU institutions","Japan","UK","All other donors"],a=e.filter((function(e){return e.Recipient.trim()===t}));return n.length>=5?n:Array.from(new Set(a.map((function(e){return e.Series})))).filter((function(e){return!n.includes(e)})).slice(0,5).concat(n)},fe=function(e){void 0===e&&(e="far");return{type:"value",nameRotate:90,name:"US$ millions",nameLocation:"end",nameTextStyle:{verticalAlign:"top",align:"right",padding:{near:[-35,0,0,0],middle:[-45,0,0,0],far:[-54,0,0,0]}[e]}}},pe=function(e,t,n,a){var r=a.years,i=a.channels,l={color:ie,legend:{show:!0,top:"top",padding:[20,10,5,10],textStyle:{fontSize:"1.3rem"}},grid:{bottom:"10%",top:"20%"},xAxis:{type:"category",data:r,position:"bottom"},series:i.map((function(e){return{name:e,data:ue(t,r,n,e).map((function(e){return{value:e&&Number(e.value).toFixed(2),emphasis:{focus:"self"}}})),type:"bar",stack:"channels",cursor:"auto",tooltip:{trigger:"item",formatter:function(t){return e+", "+t.name+" <br />10 largest recipients: <strong>US$"+le.format(Math.round(t.value))+" million</strong>"}},animation:!1}}))};return l.yAxis=fe(k(l.series)),M.toolbox.feature.saveAsImage.name="recipients",e.setOption(o()(l,M),{replaceMerge:["series"]}),e.on("legendselectchanged",(function(t){L(e,t)})),e},be=function(e,t,n){var a=n.recipient,r=n.years,i=ce(t),o=me(t,a).map((function(e){return{name:e,data:ue(i,r,a,"All other donors"===e?"Other donors":e).map((function(e){return{value:e&&Number(e.value).toFixed(2),emphasis:{focus:"self"}}})),type:"bar",stack:a,cursor:"auto",tooltip:{trigger:"item",formatter:function(t){return e+", "+t.name+" <br/>"+a+": <strong>US$"+le.format(Math.round(t.value))+" million</strong>"}}}})).reduce((function(e,t){return e.concat(t)}),[]);e.setOption({yAxis:fe(k(o)),series:o},{replaceMerge:["series"]})},he=function(e,t,n){var a=n.recipient,r=n.years,i=function(e){var t=["Not reported","Other"],n=e.filter((function(e){return!t.includes(e)}));return t.forEach((function(t){e.includes(t)&&n.push(t)})),n}(function(e,t){var n=e.filter((function(e){return e.Recipient.trim()===t}));return Array.from(new Set(n.map((function(e){return e.Series}))))}(t,a)).map((function(e){return{name:e,data:de(t,e,r),type:"bar",stack:a,cursor:"auto",tooltip:{trigger:"item",formatter:function(t){return t.name+" <br/>"+e+": <strong>US$"+le.format(Math.round(t.value))+" million</strong>"}}}})).reduce((function(e,t){return e.concat(t)}),[]),o=oe;e.setOption({yAxis:fe(k(i)),color:o,series:i},{replaceMerge:["series"]})},ge=function(){window.DICharts.handler.addChart({className:"dicharts--gha-recipients",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r,i,o,s,c,d,m,f,p,b,h;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new window.DICharts.Chart(t.parentElement),e.next=3,O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/recipient-and-donors.csv");case 3:a=e.sent,r=a.filter((function(e){return"Donor"===e.Type})),i=a.filter((function(e){return"Channel"===e.Type})),o=N(t),s=Array.from(new Set(r.map((function(e){return e.Recipient})))),c=Array.from(new Set(r.map((function(e){return e.Year})))),"Afghanistan","By donor",d=me(r,"Afghanistan"),m=Array.from(new Set(i.map((function(e){return e.Recipient})))),f=window.echarts.init(t),pe(f,ce(r),"Afghanistan",{years:c,channels:d}),p="Afghanistan",b=function(e,t){if(void 0===t&&(t="By donor"),p=e||"Afghanistan","By donor"===t)if("10 largest recipients"!==p){var n=r.filter((function(e){return e.Recipient===p}));be(f,n,{recipient:p,years:c})}else p="10 largest recipients",pe(f,ce(r),"10 largest recipients",{years:c,channels:d});else he(f,i.filter((function(t){return t.Recipient===e})),{recipient:e,years:c})},h=function(e,t){if("By donor"===e)if("10 largest recipients"!==t){var n=r.filter((function(e){return e.Recipient===t}));be(f,n,{recipient:t,years:c})}else pe(f,ce(r),"10 largest recipients",{years:c,channels:d});else he(f,i.filter((function(e){return e.Recipient===t})),{recipient:t,years:c})},Object(l.createRoot)(o).render(u.a.createElement(re,{donorRecipients:s,orgTypeRecipients:m,onSelectRecipient:b,onSelectBreakdown:h,defaultBreakdown:"By donor",defaultRecipient:"Afghanistan"})),n.hideLoading(),T(f,t);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})},ye=n(250),xe=n.n(ye),ve=function(e){var t=Object(c.useState)("People_in_need_(millions)"),n=t[0],a=t[1],r=[{name:"People_in_need_(millions)",label:"People in need",icon:"https://devinit.org/assets/svg/icons/people-in-need-icon-yellow.svg",disabledIcon:"https://devinit.org/assets/svg/icons/people-in-need-icon-disabled.svg"},{name:"Crisis_type",label:"Crisis state",icon:"https://devinit.org/assets/svg/icons/crisis-type-icon-yellow.svg",disabledIcon:"https://devinit.org/assets/svg/icons/crisis-type-icon-disabled.svg"},{name:"IPC_Food_insecurity_phase",label:"Food insecurity",icon:"https://devinit.org/assets/svg/icons/food-security-yellow.svg",disabledIcon:"https://devinit.org/assets/svg/icons/food-security-disabled.svg"},{name:"Climate_vulnerability",label:"Climate vulnerability",icon:"https://devinit.org/assets/svg/icons/climate-vulnerability-icon-yellow.svg",disabledIcon:"https://devinit.org/assets/svg/icons/climate-vulnerability-icon-disabled.svg"}];return Object(c.useEffect)((function(){e.onSelectDimension(n),window.dataLayer.push({event:"mapFilterSelected",filter:r.find((function(e){return e.name===n})).label})}),[n]),u.a.createElement("ul",null,r.map((function(e){return u.a.createElement("li",{key:e.name,className:"mapFilterItem"},e.icon?u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{onClick:function(){a(e.name)},className:n===e.name?"mapFilterButton mapFilterItem-active":"mapFilterButton"},u.a.createElement("img",{src:n===e.name?e.icon:e.disabledIcon,alt:e.name,height:"20",width:"20"}),u.a.createElement("p",{className:"Food_insecure_(millions)"===e.name?"food-icon":""},e.label))):u.a.createElement("button",{onClick:function(){a(e.name)}},u.a.createElement("p",null,e.label)))})))};ve.propTypes={onSelectDimension:m.a.func};var we=ve,Se=function(e){return u.a.createElement("button",{className:"reset-button",onClick:e.onReset},"Reset")};Se.propTypes={onReset:m.a.func};var Ae=Se,Ce="https://devinit.org/assets/svg/icons/response-plan-icon-yellow.svg",_e=["#fac47e","#f7a838","#df8000","#ba6b15","#7d4712"],Oe=[{variable:"Crisis_type",data:[{score:"",label:"Not in crisis"},{score:"In Crisis",label:"In crisis"},{score:"Entering protracted crisis",label:"Entering protracted crisis"},{score:"In protracted crisis",label:"In protracted crisis"}]},{variable:"IPC_Food_insecurity_phase",data:[{score:"Not assessed",label:"No data"},{score:"2",label:"2"},{score:"3",label:"3"},{score:"3+",label:"3+"},{score:"4",label:"4"}]},{variable:"People_in_need_(millions)"},{variable:"Climate_vulnerability",data:[{score:"",label:"No data"},{score:"1",label:"Very low"},{score:"2",label:"Low"},{score:"3",label:"Medium"},{score:"4",label:"High"},{score:"5",label:"Very high"}]}],Ne=function(e){return e.trim()},De=function(e,t,n){return e?n+"% funded (US$"+Ne(t)+" million of US$"+Ne(e)+" million)":"None"},Le=function(e,t){return e.map((function(e){return{id:e.Country_ID,name:e.Country_name}})).find((function(e){return e.id===t})).name},Ee=function(e,t,n,a,r){var i=[];return e.forEach((function(e){var o={};o.name=e,t.forEach((function(t){t[n]===e&&(o[t.variable]=t[a],r&&(o[r]=t[r]))})),i.push(o)})),i},Te=function(e,t){if("Crisis_type"===t)switch(e){case"In protracted crisis":return"#7d4712";case"Entering protracted crisis":return"#ba6b15";case"In Crisis":return"#df8000";default:return"#E6E1E5"}else if("IPC_Food_insecurity_phase"===t)switch(e){case"4":return"#7d4712";case"3+":return"#ba6b15";case"3":return"#df8000";case"2":return"#f7a838";default:return"#E6E1E5"}else switch(e){case"5":return"#7d4712";case"4":return"#ba6b15";case"3":return"#df8000";case"2":return"#f7a838";case"1":return"#fac47e";default:return"#E6E1E5"}},ke=window.L.control({position:"bottomright"});ke.onAdd=function(){return this.div=window.L.DomUtil.create("div","databox"),this.div.setAttribute("data-id","databoxContainer"),this.update(),this.div},ke.update=function(e,t){var n,a,r,i;this.div.innerHTML=e?'<div style="padding-bottom: 0px;">'+Le(t,e.iso_a3)+' <button id=closeDatabox><img src=https://devinit.org/assets/svg/icons/cross.colors-poppy-slate-blank-poppydark.svg alt=close height=20 width=20 ></img></button></div><div style="margin-top: 8px;"> '+(n=e,[{value:(a=n["Country_response_plan_requirements_(US$,_million)"],r=n["Country_response_plan_coverage_(%)"],i=n["Country_response_plan_funding_(US$,_million)"],a?r+"% funded (US$"+Ne(i)+" million  of US$"+Ne(a)+" million)":"None"),label:"Country RP",icon:{image:Ce,text:"response-plan"}},{value:De(n["Regional_response_plan_requirements_(US$,_million)"],n["Regional_response_plan_funding_(US$,_million)"],n["Regional_response_plan_coverage_(%)"]),label:"Regional RP",icon:{image:Ce,text:"response-plan"}}]).map((function(e){return"<span><img src="+e.icon.image+" alt="+e.icon.text+" height=20 width=20 ></img><p>"+e.label+": "+e.value+"</p> </span>"})).join("")+"</div>":"";var o=document.getElementById("closeDatabox");o&&o.addEventListener("click",(function(e){return function(e,t){e.stopPropagation(),t.update(),document.querySelector('[data-id="databoxContainer"]').style.display="none"}(e,ke)}))};var je=function(e,t){var n=t.map((function(t){return Number(t[e])}));return{maxValue:Math.ceil(Math.max.apply(Math,n)),minValue:Math.ceil(Math.min.apply(Math,n))<10?0:Math.ceil(Math.min.apply(Math,n))}},Ve=function(e){return e>=0&&e<40?"Very low":e>=40&&e<50?"Low":e>=50&&e<55?"Medium":e>=55&&e<60?"High":e>=60?"Very high":"Not assessed"},Me=function(e){return e?e.replace("%",""):""},Re=function(e){return e>=0&&e<1e-4?"#d3e0f4":e>=1e-4&&e<.001?"#a3c7eb":e>=.001&&e<.01?"#77adde":e>=.01&&e<.1?"#4397d3":e>=.1&&e<1?"#105fa3":e>=1?"#0a3a64":"#E6E1E5"},Fe=function(e,t){var n;n="total"===t?[0,7.5,15,22.5,30,37.5]:[0,7,14,21,28,35];var a=Me(e)?Number(Me(e)):void 0;return a>=0&&a<n[1]?"#bcd4f0":a>=n[1]&&a<n[2]?"#77adde":a>=n[2]&&a<n[3]?"#5da3d9":a>=n[3]&&a<n[4]?"#0089cc":a>=n[4]?"#0c457b":"#E6E1E5"},Ue=function(e,t,n,a,r,i,o,l,s){var c,u=o;u.onAdd=function(){var t=window.L.DomUtil.create("div","legend"),n=je(e,r),a="People_in_need_(millions)"===e?_e.map((function(e){return'<span>\n          <i style="background:'+e+';border-radius:1px;margin-right:0;width:40px;"></i>\n        </span>'})).join("")+' <p style="margin-left:1px;margin-top: 4px;">'+n.minValue+" - "+n.maxValue+", millions of people</p>":Oe.find((function(t){return t.variable===e})).data.map((function(t){return'<span><i style="background:'+Te(t.score,e)+'"></i><label>'+t.label+"</label></span>"})).join("");return t.innerHTML=a,t},u.addTo(t);var d,m=function(t){return{fillColor:n(t.properties[e],e),weight:1,opacity:1,color:"white",fillOpacity:1}},f=function(e){c.resetStyle(e.target),e.target.closePopup()},p=function(n,a){n.properties[e]||""===n.properties[e]?a.on({mouseover:function(t){return function(e,t,n,a){var r=e.target,i=document.querySelector('[data-id="databoxContainer"]');i&&"none"!==i.style.display&&(ke.update(),i.style.display="none"),r.setStyle({fillColor:"#5da3d9",color:"#484848",weight:2}),window.L.Browser.ie||window.L.Browser.opera||window.L.Browser.edge||r.bringToFront(),r.bindTooltip("No data"!==r.feature.properties[t]&&"Not assessed"!==r.feature.properties[t]?"<div>"+Le(a,r.feature.properties.iso_a3)+"<br>"+n.find((function(e){return e.name===t})).label+": "+("Food_insecure_(millions)"===t&&"0.0"===r.feature.properties[t]?"< 0.1":r.feature.properties[t])+'<span style="padding-left: 2px;">'+n.find((function(e){return e.name===t})).unit+"</span></div>":"<div>"+Le(a,r.feature.properties.iso_a3)+"<br> Not assessed</div>",{direction:"top",opacity:1}).openTooltip()}(t,e,i,s)},mouseout:f,click:function(e){return function(e,t,n,a){n.addTo(t);var r=e.target;window.dataLayer.push({event:"countryClicked",country:Le(a,r.feature.properties.iso_a3)}),n.update(r.feature.properties,a)}(e,t,ke,s)}}):a.on({mouseover:function(){t.getContainer().querySelectorAll(".leaflet-interactive").forEach((function(e){e.classList+=" grab-cursor-enabled"}))},mouseout:function(){t.getContainer().querySelectorAll(".leaflet-interactive.grab-cursor-enabled").forEach((function(e){e.classList.remove("grab-cursor-enabled")}))}})};l.clearLayers(),c=window.L.geoJSON((d=r,a.map((function(e){var t=Object.assign({},e),n=d.find((function(t){return t.name===e.properties.name}));return n&&(t.properties=Object.assign({},e.properties,n)),t}))),{style:m,onEachFeature:p}),l.addLayer(c)};var Ie=function(){window.DICharts.handler.addChart({className:"dicharts--gha-people-affected-by-crisis-leaflet",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){window.dataLayer=window.dataLayer||[];var t=new window.DICharts.Chart(e.parentElement),n=window.L.map(e,{maxZoom:3,minZoom:1,crs:window.L.CRS.EPSG4326,center:[6.6,20.9],zoom:1,attributionControl:!1}),a="People_in_need_(millions)",i=N(e),o=[{name:"People_in_need_(millions)",label:"People in need",scaleType:"continous",unit:"million"},{name:"Crisis_type",label:"Crisis state",scaleType:"piecewise",unit:""},{name:"IPC_Food_insecurity_phase",label:"Food insecurity",scaleType:"piecewise",unit:""},{name:"Climate_vulnerability",label:"Climate vulnerability",scaleType:"piecewise",unit:""}],s=window.L.control({position:"topright"}),c=window.L.control({position:"bottomleft"});t.showLoading(),window.fetch("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/src/data/world_map.geo.json").then((function(e){return e.json()})).then((function(e){var u=e.features;O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/src/data/map_data_long.csv").then((function(e){var d,m,f,p=(d=u,m="Country_ID",f="Country_name",e.map((function(e){var t=Object.assign({},e),n=d.find((function(e){return e.properties.iso_a3===t[m]}));return n&&(t[f]=n.properties.name),t}))),b=Array.from(new Set(p.map((function(e){return e.Country_name})))),h=Ee(b,p,"Country_name","value"),g=window.L.featureGroup().addTo(n),y=function(e,t){var n=je(t,h),a=(n.maxValue-n.minValue)/_e.length;return e?function(e,t,n,a,r,i){for(var o=[],l=t;l<=n;l+=a)o.push(l);return r.scale(i).domain(o)(Math.abs(e))}(e,n.minValue,n.maxValue,a,xe.a,_e):"#E6E1E5"},x=function(){n.setView([6.6,20.9],1)};Object(l.createRoot)(i).render(Object(r.b)(we,{onSelectDimension:function(t){Ue(t,n,"continous"===o.find((function(e){return e.name===t})).scaleType?y:Te,u,h,o,s,g,e)}})),c.onAdd=function(){var e=window.L.DomUtil.create("div");return Object(l.createRoot)(e).render(Object(r.b)(Ae,{onReset:x})),e},c.addTo(n),Ue(a,n,"continous"===o.find((function(e){return e.name===a})).scaleType?y:Te,u,h,o,s,g,e),t.hideLoading()}))})).catch((function(e){return console.log(e)}))}))}}})},Pe=(n(624),n(625),[{year:"2017",progress:0},{year:"2018",progress:25},{year:"2019",progress:50},{year:"2020",progress:75},{year:"2021",progress:100}]),ze=function(e){var t=Object(c.useState)(e.defaultValue?e.defaultValue:e.min),n=t[0],a=t[1];Object(c.useEffect)((function(){e.onChange&&e.onChange(n)}),[n]);return u.a.createElement("div",{className:"range labelled-data-selector--wrapper "+e.className},u.a.createElement("label",null,u.a.createElement("b",null,e.label)),u.a.createElement("input",{type:"range",id:e.name,value:n,min:e.min,max:e.max,step:e.step,onChange:function(t){t.preventDefault();var n,r=document.querySelector("#"+e.name);e.incremental&&(n="years"===e.name?Pe.find((function(e){return e.year===t.target.value})).progress:Number(t.target.value)/Number(r.max)*100,r.style.background="linear-gradient(to right, #cb5730 "+n+"%, #ccc "+n+"%)"),a(t.target.value)}}),u.a.createElement("div",{className:"slider-ticks"},e.dataList.map((function(e){return u.a.createElement("span",{key:e}," ",u.a.createElement("label",null,e))}))))};ze.propTypes={step:m.a.number,min:m.a.string,max:m.a.string,onChange:m.a.func,label:m.a.string,dataList:m.a.array,name:m.a.string,incremental:m.a.bool,className:m.a.string,defaultValue:m.a.string};var We=ze,Ge=function(e){var t=e.label,n=e.onChange,a=Object(c.useState)(!0),r=a[0],i=a[1],o=Object(c.useState)(""),l=o[0],s=o[1];Object(c.useEffect)((function(){s(r?"yes":"")}),[r]),Object(c.useEffect)((function(){n&&n(l)}),[l]);return u.a.createElement("div",{className:"radio-select labelled-data-selector--wrapper"},u.a.createElement("label",null,t),u.a.createElement("label",{htmlFor:"yes"},u.a.createElement("input",{type:"checkbox",name:"yes",id:"yes",onChange:function(e){"yes"===e.target.name&&i(!r)},checked:r})," Countries in protracted crisis"))};Ge.propTypes={onChange:m.a.func,label:m.a.string};var Be=Ge,$e=["#bcd4f0","#77adde","#5da3d9","#0089cc","#0c457b"],He=["#d3e0f4","#a3c7eb","#77adde","#4397d3","#105fa3","#0a3a64"],Ye=["0","0.1m","1m","10m","100m","1b","1.5b"],qe=[0,7.5,15,22.5,30,37.5],Je=[0,7,14,21,28,35],Ze=[{label:4,value:60,text:"Very high"},{label:3,value:55,text:"High",min:55,max:60},{label:2,value:50,text:"Medium",min:50,max:55},{label:1,value:40,text:"Low",min:40,max:50},{label:0,value:0,text:"Very low",min:0,max:40}],Ke=function(e,t){if(0===t)return e;var n=Ze.find((function(e){return e.value===t}));return 60===n.value?e.filter((function(e){return e.Vulnerability_Score_new>=60})):e.filter((function(e){return e.Vulnerability_Score_new<n.max&&e.Vulnerability_Score_new>=n.min}))},Qe=function(e,t){return"CCA"===e&&"Total_Climate_USD"===t?"CCA_USD":"CCA"===e&&"Total_Climate_Share"===t?"CCA_Share":"CCM"===e&&"Total_Climate_Share"===t?"CCM_Share":"CCM"===e&&"Total_Climate_USD"===t?"CCM_USD":t},Xe=function(e){return Ze.find((function(t){return t.label===e})).value},et=function(e,t,n){return"total"===n?"Total_Climate_Share"===e?t.properties[e]:t.properties[e]/1e3:"Total_Climate_Share"===e?t.properties[Qe(n,e)]:t.properties[Qe(n,e)]/1e3},tt=function(e,t){return e.find((function(e){return e.name===t}))},nt=function(e,t,n,a){var r,i=tt(e,n);return i?(r="total"===a?"Total_Climate_Share"===t?i[t]:i[t]/1e3:"Total_Climate_Share"===t?i[Qe(a,t)]:i[Qe(a,t)]/1e3,"Total_Climate_Share"===t?Fe(r,a):Re(r)):"#E6E1E5"},at=[{label:"Solomon Islands",name:"Solomon Is.",coordinates:[-10.575488,161.755118]},{name:"Vanuatu",coordinates:[-15.04767,166.737858]},{name:"Comoros",coordinates:[-11.638005,43.328645]},{name:"Cabo Verde",coordinates:[16.841028,-23.742468]},{name:"São Tomé and Principe",coordinates:[.384856,6.651183]},{name:"Mauritius",coordinates:[-21.008972,55.405847]},{name:"Fiji",coordinates:[-17.493468,178.018069]},{name:"Samoa",coordinates:[-13.494016,-172.520477]},{label:"Saint Vincent and the Grenadines",name:"St. Vin. and Gren.",coordinates:[13.348472,-61.147504]},{name:"Tuvalu",coordinates:[-8.444944,179.127396]},{name:"Tonga",coordinates:[-21.141279,-175.303819]},{name:"Timor-Leste",coordinates:[-8.555272,126.67637]},{name:"Tokelau",coordinates:[-9.129344,-171.840652]},{name:"Seychelles",coordinates:[-4.596714,55.443287]},{name:"Palau",coordinates:[7.599856,134.62149]},{name:"Nauru",coordinates:[-.520427,166.936612]},{label:"Marshall Islands",name:"Marshall Is.",coordinates:[7.583201,168.612489]},{name:"Maldives",coordinates:[-.383325,73.103751]},{name:"Kiribati",coordinates:[1.784491,-157.299146]},{label:"Antigua and Barbuda",name:"Antigua and Barb.",coordinates:[17.195139,-61.306447]}],rt=function(e,t,n,a,r,i,o,l,s,c){var u,d=i;d.onAdd=function(){var t=window.L.DomUtil.create("div","legend"),n='<div style="display:flex;flex-direction:column;">\n    <div>\n    '+("Total_Climate_Share"===e?$e.map((function(e){return'<span>\n      <i style="background:'+e+';border-radius:1px;margin-right:0;width:50px;"></i>\n    </span>'})).join(""):He.map((function(e){return'<span>\n          <i style="background:'+e+';border-radius:1px;margin-right:0;width:50px;"></i>\n        </span>'})).join(""))+"\n    </div>\n    <div>\n    "+("Total_Climate_Share"===e?"total"===c?qe.map((function(e,t){return t===qe.length-1?"<span> "+e+" (%)</span>":'<span style="width:50px;">'+e+"</span>"})).join(""):Je.map((function(e,t){return t===Je.length-1?"<span> "+e+" (%)</span>":'<span style="width:50px;">'+e+"</span>"})).join(""):Ye.map((function(e,t){return'\n        <span style="width:45px;">'+(t===Ye.length-1?e+" (US$)":e)+"</span>\n        "})).join(""))+"\n    </div>\n     </div>";return t.innerHTML=n,t},d.addTo(t);var m,f=function(t){return"Total_Climate_Share"===e?n(et(e,t,c),c):n(et(e,t,c))},p=function(n){var a;return(a={})[n.properties.protracted_crisis&&n.properties[e]&&s?"fillPattern":"fillColor"]=function(n){return n.properties.protracted_crisis&&n.properties[e]&&s?new window.L.StripePattern({fill:!0,weight:2,spaceWeight:6,spaceColor:f(n),spaceOpacity:1,angle:45,color:"#d12568"}).addTo(t):f(n)}(n),a.weight=1,a.opacity=1,a.color="white",a.fillOpacity=1,a},b=function(e){u.resetStyle(e.target),e.target.closePopup()},h=function(n,a){n.properties[e]||""===n.properties[e]?a.on({mouseover:function(n){return function(e,t,n,a,r){var i=e.target;i.feature.properties.protracted_crisis&&r?i.setStyle({color:"#484848",weight:2,fillPattern:new window.L.StripePattern({weight:2,spaceOpacity:1,spaceColor:"#df8000",spaceWeight:6,angle:45,color:"#d12568"}).addTo(a)}):i.setStyle({fillColor:"#df8000",color:"#484848",weight:2}),window.L.Browser.ie||window.L.Browser.opera||window.L.Browser.edge||i.bringToFront();var o,l,s=(o=n,l=i.feature.properties.ISO_A3,o.find((function(e){return e.iso3===l}))?o.find((function(e){return e.iso3===l})).countryname:"");i.bindTooltip(i.feature.properties[t]?"<div>"+(s||i.feature.properties.name)+"<br>\n          Total climate ODA: US$"+Number(i.feature.properties.Total_Climate_USD).toFixed(1)+"<br>\n          Adaptation:  US$"+Number(i.feature.properties.CCA_USD).toFixed(1)+" ("+(0!==Number(i.feature.properties.Total_Climate_USD)?(Number(i.feature.properties.CCA_USD)/Number(i.feature.properties.Total_Climate_USD)*100).toFixed(1):0)+"%)<br>\n          Mitigation: US$"+Number(i.feature.properties.CCM_USD).toFixed(1)+" ("+(0!==Number(i.feature.properties.Total_Climate_USD)?(Number(i.feature.properties.CCM_USD)/Number(i.feature.properties.Total_Climate_USD)*100).toFixed(1):0)+"%)<br>\n          Climate vulnerability: "+(i.feature.properties.Vulnerability_Score_new?Ve(Number(i.feature.properties.Vulnerability_Score_new)):"Not assesed")+"<br>\n          Share of total ODA: "+(0!==Number(i.feature.properties.Total_ODA_USD)?(Number(i.feature.properties.Total_Climate_USD)/Number(i.feature.properties.Total_ODA_USD)*100).toFixed(1)+"%":"0%")+"<br>\n          "+(i.feature.properties.protracted_crisis?"In protracted crisis":"")+"\n          </div>\n          ":"<div>"+s+"<br> Not assessed</div>",{direction:"top",opacity:1}).openTooltip()}(n,e,l,t,s)},mouseout:b}):a.on({mouseover:function(){t.getContainer().querySelectorAll(".leaflet-interactive").forEach((function(e){e.classList+=" grab-cursor-enabled"}))},mouseout:function(){t.getContainer().querySelectorAll(".leaflet-interactive.grab-cursor-enabled").forEach((function(e){e.classList.remove("grab-cursor-enabled")}))}})};at.forEach((function(n){var a=tt(r,n.name),i=window.L.divIcon({className:"my-div-icon",html:"<div style='background-color:"+nt(r,e,n.name,c)+";' class='marker-pin'></div>"}),o=window.L.marker(n.coordinates,{icon:i});a&&(o.bindTooltip(a[e]?"<div>"+(n.label?n.label:n.name)+"<br>\n    Total climate ODA: US$"+Number(a.Total_Climate_USD).toFixed(1)+"<br>\n    Adaptation:  US$ "+Number(a.CCA_USD).toFixed(1)+" ( "+(0!==Number(a.Total_Climate_USD)?(Number(a.CCA_USD)/Number(a.Total_Climate_USD)*100).toFixed(1):0)+"%)<br>\n    Mitigation: US$ "+Number(a.CCM_USD).toFixed(1)+" ("+(0!==Number(a.Total_Climate_USD)?(Number(a.CCM_USD)/Number(a.Total_Climate_USD)*100).toFixed(1):0)+"%)<br>\n    Climate vulnerability: "+(a.Vulnerability_Score_new?Ve(Number(a.Vulnerability_Score_new)):"Not assesed")+"<br>\n    Share of total ODA: "+(0!==Number(a.Total_ODA_USD)?(Number(a.Total_Climate_USD)/Number(a.Total_ODA_USD)*100).toFixed(1)+"%":"0%")+"<br>\n    "+(a.protracted_crisis?"In protracted crisis":"")+"\n    </div>\n    ":"<div>"+n.name+"<br> Not assessed</div>",{direction:"top",opacity:1}),o.on("mouseover",(function(e){e.target.openTooltip(),e.target._icon.childNodes[0].style.backgroundColor="#df8000"})),o.on("mouseout",(function(t){t.target.closePopup(),t.target._icon.childNodes[0].style.backgroundColor=nt(r,e,n.name,c)}))),o.addTo(t)})),o.clearLayers(),u=window.L.geoJSON((m=r,a.map((function(e){var t=Object.assign({},e),n=m.find((function(t){return t.name===e.properties.name}));return n&&(t.properties=Object.assign({},e.properties,n)),t}))),{style:p,onEachFeature:h}),o.addLayer(u)};var it=function(){window.DICharts.handler.addChart({className:"dicharts--gha-climate-funding",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){window.dataLayer=window.dataLayer||[];var t=new window.DICharts.Chart(e.parentElement),n=window.L.map(e,{maxZoom:3,minZoom:1,crs:window.L.CRS.EPSG4326,center:[6.6,14.1],zoom:1,attributionControl:!1}),a="Total_Climate_USD",i="2021",o=0,s="total",c=N(e),u=[{value:"Total_Climate_USD",label:"US$ millions"},{value:"Total_Climate_Share",label:"% of total ODA"}],d=[{value:"total",label:"Total climate ODA"},{value:"CCA",label:"Climate adaptation ODA"},{value:"CCM",label:"Climate mitigation ODA"}],m=window.L.control({position:"topright"}),f=window.L.control({position:"bottomleft"});t.showLoading(),window.fetch("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/custom.json").then((function(e){return e.json()})).then((function(e){var p=e.features;O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/climate_funding_data_long_format.csv").then((function(e){var b,h,g,y,x=(b=p,h="iso3",g="countryname",e.map((function(e){var t=Object.assign({},e),n=b.find((function(e){return e.properties.iso_a3===t[h]}));return n&&(t[g]=n.properties.name),t}))),v=x.filter((function(e){return e.year===i})),S=Array.from(new Set(x.map((function(e){return e.countryname})))),A=Ee(S,v,"countryname","value_precise","protracted_crisis"),C=Ke(A,Xe(o)),_=window.L.featureGroup().addTo(n);rt(a,n,"Total_Climate_Share"===a?Fe:Re,p,C,m,_,e,y,s);var O=function(){n.setView([[6.6,14.1]],1)};Object(l.createRoot)(c).render(Object(r.b)("div",null,Object(r.b)(w,{classNamePrefix:"climate-chart-select",label:"Select value type",options:u,defaultValue:[{value:"Total_Climate_USD",label:"US$ millions"}],onChange:function(t){a=t.value?t.value:a,rt(a,n,"Total_Climate_Share"===a?Fe:Re,p,C,m,_,e,y,s)},css:{minWidth:"150px"}}),Object(r.b)(w,{classNamePrefix:"climate-adaptation-select",label:"Select adaptation/mitigation",options:d,defaultValue:[{value:"total",label:"Total climate ODA"}],onChange:function(t){s=t.value?t.value:s,rt(a,n,"Total_Climate_Share"===a?Fe:Re,p,C,m,_,e,y,s)},css:{minWidth:"150px"}}),Object(r.b)(We,{label:"Select a year",min:"2017",max:"2021",defaultValue:"2021",step:1,onChange:function(t){v=function(e,t){return e.filter((function(e){return e.year===t}))}(x,i=t||i),A=Ee(S,v,"countryname","value_precise","protracted_crisis"),C=Ke(A,Xe(o)),rt(a,n,"Total_Climate_Share"===a?Fe:Re,p,C,m,_,e,y,s)},dataList:["2017","2018","2019","2020","2021"],name:"years",incremental:!1,className:"year-slider"}),Object(r.b)(We,{label:"Select vulnerability level",min:"0",max:"4",step:1,onChange:function(t){o=t?Number(t):o,C=Ke(A,Xe(o)),rt(a,n,"Total_Climate_Share"===a?Fe:Re,p,C,m,_,e,y,s)},dataList:["All countries","Low","Medium","High","Very high"],name:"vulnerability",incremental:!1,className:"range-width vulnerability-range"}),Object(r.b)(Be,{name:"crisis",label:"Highlight",onChange:function(t){rt(a,n,"Total_Climate_Share"===a?Fe:Re,p,C,m,_,e,y=t,s)}}))),f.onAdd=function(){var e=window.L.DomUtil.create("div");return Object(l.createRoot)(e).render(Object(r.b)(Ae,{onReset:O})),e},f.addTo(n),t.hideLoading()}))})).catch((function(e){return console.log(e)}))}))}}})},ot=function(e){return _(e,"Total Funding").filter((function(e){return"#N/A"!==e.Region})).map((function(e){return[Number(e.Vulnerability),e.Region,Number(e["Total Funding"]),e.Country]}))},lt=function(e,t){var n=V(t,"Total Funding"),a={tooltip:{trigger:"item",formatter:function(e){return e.data[3]+" <br/>\n      Vulnerability: "+Ve(100*e.data[0])+" <br/>\n      Total climate ODA: US$"+Number(e.data[2]).toFixed(1)+" million\n      "}},grid:{bottom:"10%",top:"20%",left:"2%"},xAxis:{name:"Vulnerability level",nameLocation:"center",nameTextStyle:{fontWeight:"bold"},position:"top",min:.4,max:.7,scale:!0,nameGap:25,axisLabel:{show:!1},splitLine:{show:!1}},yAxis:{type:"category",data:["Oceania","Latin America and the Caribbean","Asia","Africa"],splitArea:{show:!0,areaStyle:{color:["white","#faf6f5"]}},axisLabel:{fontWeight:"bold",formatter:function(e){return"Latin America and the Caribbean"===e?"Latin America and\nthe Caribbean":e}}},series:[{type:"scatter",name:"Protracted crisis",data:ot(t.filter((function(e){return"Protracted Crisis"===e["Crisis Class"]}))),itemStyle:{opacity:.8,borderColor:"black",color:"#7e1850"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],z:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}},{type:"scatter",name:"Other ODA recipients",data:ot(t.filter((function(e){return"Protracted Crisis"!==e["Crisis Class"]}))),zlevel:1,itemStyle:{opacity:.8,borderColor:"black",color:"#f9cdd0"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],z:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}}]};return e.setOption(o()(M,a)),e.on("legendselectchanged",(function(t){L(e,t)})),e},st=function(){window.DICharts.handler.addChart({className:"dicharts--gha-total-climate-finance",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new window.DICharts.Chart(t.parentElement),e.next=3,O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/climate-finance-bubble-data.csv");case 3:a=e.sent,r=window.echarts.init(t),lt(r,a),n.hideLoading(),T(r,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})},ct=function(e){return e.filter((function(e){return"#N/A"!==e.Region})).map((function(e){return[Number(e.Vulnerability),e.Region,Number(Me(e["Funding share of ODA"])),e.Country]}))},ut=function(e){var t=e.map((function(e){return Number(Me(e["Funding share of ODA"]))}));return{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}},dt=function(e,t){var n={tooltip:{trigger:"item",formatter:function(e){return e.data[3]+" <br/>\n      Vulnerability: "+Ve(100*Number(e.data[0]))+" <br/>\n      Share of total ODA: "+Number(e.data[2]).toFixed(1)+"%\n      "}},grid:{bottom:"10%",top:"20%",left:"2%"},xAxis:{name:"Vulnerability level",nameLocation:"center",nameTextStyle:{fontWeight:"bold"},position:"top",min:.4,max:.7,scale:!0,nameGap:25,axisLabel:{show:!1}},yAxis:{type:"category",data:["Oceania","Latin America and the Caribbean","Asia","Africa"],splitArea:{show:!0,areaStyle:{color:["white","#faf6f5"]}},axisLabel:{fontWeight:"bold",formatter:function(e){return"Latin America and the Caribbean"===e?"Latin America and\nthe Caribbean":e}}},series:[{type:"scatter",name:"Protracted crisis",data:ct(t.filter((function(e){return"Protracted Crisis"===e["Crisis Class"]}))),zlevel:2,itemStyle:{opacity:.8,borderColor:"black",color:"#7e1850"},symbolSize:function(e){return j(e[2],8,80,ut(t).min,ut(t).max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}},{type:"scatter",name:"Other ODA recipients",data:ct(t.filter((function(e){return"Protracted Crisis"!==e["Crisis Class"]}))),zlevel:1,itemStyle:{opacity:.8,borderColor:"black",color:"#f9cdd0"},symbolSize:function(e){return j(e[2],8,80,ut(t).min,ut(t).max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}}]};return e.setOption(o()(M,n)),e.on("legendselectchanged",(function(t){L(e,t)})),e},mt=function(){window.DICharts.handler.addChart({className:"dicharts--gha-climate-percentage-oda",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new window.DICharts.Chart(t.parentElement),e.next=3,O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/climate-finance-bubble-data.csv");case 3:a=e.sent,r=window.echarts.init(t),dt(r,a),n.hideLoading(),T(r,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})},ft=function(e){return _(e,"Adaptation Share ODA(%)").filter((function(e){return"#N/A"!==e.Region})).map((function(e){return[Number(e.Vulnerability),e.Region,Number(Me(e["Adaptation Share ODA(%)"])),e.Country]}))},pt=function(e,t){var n=V(t,"Adaptation Share ODA(%)"),a={tooltip:{trigger:"item",formatter:function(e){return e.data[3]+" <br/>\n      Vulnerability: "+Ve(100*Number(e.data[0]))+" <br/>\n      Adaptation as % of total ODA: "+Number(e.data[2]).toFixed(1)+"%\n      "}},grid:{bottom:"10%",top:"20%",left:"2%"},xAxis:{name:"Vulnerability level",nameLocation:"center",nameTextStyle:{fontWeight:"bold"},position:"top",min:.4,max:.7,scale:!0,nameGap:25,axisLabel:{show:!1}},yAxis:{type:"category",data:["Oceania","Latin America and the Caribbean","Asia","Africa"],axisLabel:{fontWeight:"bold",formatter:function(e){return"Latin America and the Caribbean"===e?"Latin America and\nthe Caribbean":e}},splitArea:{show:!0,areaStyle:{color:["white","#faf6f5"]}}},series:[{type:"scatter",name:"Protracted crisis",data:ft(t.filter((function(e){return"Protracted Crisis"===e["Crisis Class"]}))),zlevel:2,itemStyle:{opacity:.8,borderColor:"black",color:"#7e1850"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}},{type:"scatter",name:"Other ODA recipients",data:ft(t.filter((function(e){return"Protracted Crisis"!==e["Crisis Class"]}))),zlevel:1,itemStyle:{opacity:.8,borderColor:"black",color:"#f9cdd0"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}}]};return e.setOption(o()(M,a)),e.on("legendselectchanged",(function(t){L(e,t)})),e},bt=function(){window.DICharts.handler.addChart({className:"dicharts--gha-climate-adaptation-funding",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new window.DICharts.Chart(t.parentElement),e.next=3,O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/climate-finance-bubble-data.csv");case 3:a=e.sent,r=window.echarts.init(t),pt(r,a),n.hideLoading(),T(r,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})},ht=function(e){return _(e,"Adaptation").filter((function(e){return"#N/A"!==e.Region&&e["Food Insecurity Gap"]})).map((function(e){return[Number(e.Vulnerability),Number(Me(e["Food Insecurity Gap"])),Number(e.Adaptation),e.Country]}))},gt=function(e,t){var n=V(t.filter((function(e){return e["Food Insecurity Gap"]})),"Adaptation"),a={tooltip:{trigger:"item",formatter:function(e){return e.data[3]+" <br/>\n      Vulnerability: "+Ve(100*Number(e.data[0]))+" <br/>\n      Adaptation ODA: US$"+Number(e.data[2]).toFixed(1)+"million <br/>\n      Food insecurity gap: "+e.data[1]+"%\n      "}},grid:{bottom:"10%",top:"20%",left:"5%"},xAxis:{name:"Vulnerability level",nameLocation:"center",nameTextStyle:{fontWeight:"bold"},min:.5,max:.7,scale:!0,nameGap:25,position:"top",axisLabel:{show:!1},axisLine:{show:!0,zlevel:0},axisTick:{show:!1}},yAxis:{min:0,max:45,interval:15,scale:!0,name:"Food insecurity gap",nameLocation:"center",nameTextStyle:{fontWeight:"bold"},nameGap:35,axisLabel:{fontWeight:"bold",formatter:function(e){return e+"%"}}},series:[{type:"scatter",name:"Protracted crisis",data:ht(t.filter((function(e){return"Protracted Crisis"===e["Crisis Class"]}))),zlevel:2,itemStyle:{opacity:.8,borderColor:"black",color:"#7e1850"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}},{type:"scatter",name:"Other ODA recipients",data:ht(t.filter((function(e){return"Protracted Crisis"!==e["Crisis Class"]}))),zlevel:1,itemStyle:{opacity:.8,borderColor:"black",color:"#f9cdd0"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}}]};return e.setOption(o()(M,a)),e.on("legendselectchanged",(function(t){L(e,t)})),e},yt=function(){window.DICharts.handler.addChart({className:"dicharts--gha-climate-finance-food-insecure",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new window.DICharts.Chart(t.parentElement),e.next=3,O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/climate-finance-bubble-data.csv");case 3:a=e.sent,r=window.echarts.init(t),gt(r,a),n.hideLoading(),T(r,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})},xt=function(e){return _(e,"Funding per capita (US$)").filter((function(e){return"#N/A"!==e.Region})).map((function(e){return[Number(e.Vulnerability),e.Region,Number(e["Funding per capita (US$)"]),e.Country]}))},vt=function(e,t){var n=V(t,"Funding per capita (US$)"),a={tooltip:{trigger:"item",formatter:function(e){return e.data[3]+" <br/>\n      Vulnerability: "+Ve(100*Number(e.data[0]))+" <br/>\n      Climate ODA per person: US$"+Number(e.data[2]).toFixed(1)+"\n      "}},grid:{bottom:"10%",top:"20%",left:"2%"},xAxis:{name:"Vulnerability level",nameLocation:"center",nameTextStyle:{fontWeight:"bold"},position:"top",min:.4,max:.7,scale:!0,nameGap:25,axisLabel:{show:!1}},yAxis:{type:"category",data:["Oceania","Latin America and the Caribbean","Asia","Africa"],splitArea:{show:!0,areaStyle:{color:["white","#faf6f5"]}},axisLabel:{fontWeight:"bold",formatter:function(e){return"Latin America and the Caribbean"===e?"Latin America and\nthe Caribbean":e}}},series:[{type:"scatter",name:"Protracted crisis",data:xt(t.filter((function(e){return"Protracted Crisis"===e["Crisis Class"]}))),zlevel:2,itemStyle:{opacity:.8,borderColor:"black",color:"#7e1850"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}},{type:"scatter",name:"Other ODA recipients",data:xt(t.filter((function(e){return"Protracted Crisis"!==e["Crisis Class"]}))),zlevel:1,itemStyle:{opacity:.8,borderColor:"black",color:"#f9cdd0"},symbolSize:function(e){return j(e[2],8,80,n.min,n.max)},emphasis:{itemStyle:{borderColor:"#333",borderWidth:2.5,color:"#df8000"}},markLine:{silent:!0,symbol:"none",label:{show:!1},lineStyle:{color:"#cac5cb",type:"solid"},data:[{xAxis:.5},{xAxis:.55},{xAxis:.6}],zlevel:0},markArea:{silent:!0,itemStyle:{color:"transparent"},label:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,fontWeight:"normal",color:"#7d7d7a"},data:[[{name:"Low",xAxis:.4},{xAxis:.5}],[{name:"Medium",xAxis:.5},{xAxis:.55}],[{name:"High",xAxis:.55},{xAxis:.6}],[{name:"Very high",xAxis:.6},{xAxis:.7}]]}}]};return e.setOption(o()(M,a)),e.on("legendselectchanged",(function(t){L(e,t)})),e},wt=function(){window.DICharts.handler.addChart({className:"dicharts--gha-climate-funding-per-capita",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new window.DICharts.Chart(t.parentElement),e.next=3,O("https://raw.githubusercontent.com/devinit/gha-data-visualisations/feature/climate-bubble-charts/public/assets/data/climate-finance-bubble-data.csv");case 3:a=e.sent,r=window.echarts.init(t),vt(r,a),n.hideLoading(),T(r,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})};window.addEventListener("load",(function(){Y(),X(),ge(),Ie(),it(),st(),mt(),bt(),yt(),wt()}))}},[[253,1,2]]]);